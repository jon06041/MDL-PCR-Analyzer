<!DOCTYPE html>
<html>
<head>
    <title>Simple Function Test</title>
</head>
<body>
    <h1>Function Test</h1>
    <button onclick="runTest()">Run Test</button>
    <div id="output"></div>

    <script src="/static/pathogen_library.js"></script>
    <script>
        // Simplified test that doesn't rely on the full script.js
        function runTest() {
            const output = document.getElementById('output');
            let html = '<h2>Test Results:</h2>';
            
            try {
                // Test 1: Check if pathogen library functions exist
                html += '<p><strong>extractTestCode function:</strong> ' + (typeof extractTestCode === 'function' ? '✅ Available' : '❌ Missing') + '</p>';
                html += '<p><strong>getPathogenName function:</strong> ' + (typeof getPathogenName === 'function' ? '✅ Available' : '❌ Missing') + '</p>';
                
                // Test 2: Test extractTestCode
                if (typeof extractTestCode === 'function') {
                    const testCode1 = extractTestCode('BVPanelPCR1_12345_CFX');
                    html += '<p><strong>extractTestCode("BVPanelPCR1_12345_CFX"):</strong> "' + testCode1 + '"</p>';
                    
                    const testCode2 = extractTestCode('Lacto_67890_CFX');
                    html += '<p><strong>extractTestCode("Lacto_67890_CFX"):</strong> "' + testCode2 + '"</p>';
                } else {
                    html += '<p style="color: red;">❌ Cannot test extractTestCode - function missing</p>';
                }
                
                // Test 3: Test getPathogenName
                if (typeof getPathogenName === 'function') {
                    const pathogenName1 = getPathogenName('BVPanelPCR1');
                    html += '<p><strong>getPathogenName("BVPanelPCR1"):</strong> "' + pathogenName1 + '"</p>';
                    
                    const pathogenName2 = getPathogenName('Lacto');
                    html += '<p><strong>getPathogenName("Lacto"):</strong> "' + pathogenName2 + '"</p>';
                    
                    const pathogenName3 = getPathogenName('Unknown');
                    html += '<p><strong>getPathogenName("Unknown"):</strong> "' + pathogenName3 + '"</p>';
                } else {
                    html += '<p style="color: red;">❌ Cannot test getPathogenName - function missing</p>';
                }
                
                // Test 4: Check PATHOGEN_LIBRARY
                html += '<p><strong>PATHOGEN_LIBRARY:</strong> ' + (typeof PATHOGEN_LIBRARY === 'object' ? '✅ Available' : '❌ Missing') + '</p>';
                if (typeof PATHOGEN_LIBRARY === 'object') {
                    html += '<p><strong>Available pathogens:</strong> ' + Object.keys(PATHOGEN_LIBRARY).slice(0, 5).join(', ') + '...</p>';
                }
                
            } catch (error) {
                html += '<p style="color: red;">❌ Error during testing: ' + error.message + '</p>';
            }
            
            output.innerHTML = html;
        }
    </script>
</body>
</html>
