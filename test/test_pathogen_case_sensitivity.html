<!DOCTYPE html>
<html>
<head>
    <title>Test Pathogen Library Case Sensitivity</title>
</head>
<body>
    <h1>Pathogen Library Case Sensitivity Test</h1>
    <div id="results"></div>
    
    <script src="static/pathogen_library.js"></script>
    <script>
        function runTest() {
            const results = [];
            
            // Test 1: Exact match (should work)
            const test1 = getPathogenTarget("Ngon", "HEX");
            results.push(`Test 1 - Exact match "Ngon", "HEX": ${test1}`);
            
            // Test 2: Case insensitive (NGON -> should find Ngon)
            const test2 = getPathogenTarget("NGON", "HEX");
            results.push(`Test 2 - Case insensitive "NGON", "HEX": ${test2}`);
            
            // Test 3: Test the extraction logic
            const pattern = "ACNGON_test_123";
            const extracted = extractTestCode(pattern);
            results.push(`Test 3 - extractTestCode("${pattern}"): ${extracted}`);
            
            // Test 4: Full chain test
            const fullTest = getPathogenTarget(extractTestCode("ACNGON_test_123"), "HEX");
            results.push(`Test 4 - Full chain ACNGON -> extract -> getPathogen: ${fullTest}`);
            
            // Test 5: Debug the case-insensitive lookup
            const testCode = "NGON";
            let found = false;
            const lowerTestCode = testCode.toLowerCase();
            for (const key in PATHOGEN_LIBRARY) {
                if (key.toLowerCase() === lowerTestCode) {
                    results.push(`Test 5 - Found match: "${key}" matches "${testCode}" (lowercase: ${key.toLowerCase()} === ${lowerTestCode})`);
                    found = true;
                    break;
                }
            }
            if (!found) {
                results.push(`Test 5 - No case-insensitive match found for "${testCode}"`);
            }
            
            // Display results
            document.getElementById('results').innerHTML = results.map(r => `<p>${r}</p>`).join('');
        }
        
        // Run test when page loads
        runTest();
    </script>
</body>
</html>
